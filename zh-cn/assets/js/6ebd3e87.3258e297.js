"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[6261],{49613:function(e,t,r){r.d(t,{Zo:function(){return p},kt:function(){return m}});var o=r(59496);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=o.createContext({}),c=function(e){var t=o.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},p=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(r),m=n,f=d["".concat(l,".").concat(m)]||d[m]||u[m]||i;return r?o.createElement(f,a(a({ref:t},p),{},{components:r})):o.createElement(f,a({ref:t},p))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,a=new Array(i);a[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,a[1]=s;for(var c=2;c<i;c++)a[c]=r[c];return o.createElement.apply(null,a)}return o.createElement.apply(null,r)}d.displayName="MDXCreateElement"},23072:function(e,t,r){r.r(t),r.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return u}});var o=r(665),n=r(40151),i=(r(59496),r(49613)),a=["components"],s={sidebar_position:7.2},l="\ud83d\udc64 User Profiles",c={unversionedId:"docs/recipes/user-profile/README",id:"docs/recipes/user-profile/README",title:"\ud83d\udc64 User Profiles",description:"In previous sections, we demonstrated how to manage your users using Admin Console, or through management APIs. This is a straightforward process for those in the role of administrator. However, it is also important for the regular users to update their profiles on their own.",source:"@site/docs/docs/recipes/user-profile/README.md",sourceDirName:"docs/recipes/user-profile",slug:"/docs/recipes/user-profile/",permalink:"/zh-cn/docs/recipes/user-profile/",draft:!1,editUrl:"https://github.com/logto-io/docs/tree/master/docs/docs/recipes/user-profile/README.md",tags:[],version:"current",sidebarPosition:7.2,frontMatter:{sidebar_position:7.2},sidebar:"docsSidebar",previous:{title:"Protect your API Resource with RBAC",permalink:"/zh-cn/docs/recipes/rbac/protect-resource"},next:{title:"\ud83e\ude9d Web hooks",permalink:"/zh-cn/docs/recipes/web-hooks/"}},p={},u=[{value:"Get started",id:"get-started",level:2}],d={toc:u};function m(e){var t=e.components,r=(0,n.Z)(e,a);return(0,i.kt)("wrapper",(0,o.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"-user-profiles"},"\ud83d\udc64 User Profiles"),(0,i.kt)("p",null,"In previous sections, we demonstrated how to manage your users ",(0,i.kt)("a",{parentName:"p",href:"/docs/recipes/manage-users/admin-console"},"using Admin Console"),", or through ",(0,i.kt)("a",{parentName:"p",href:"/docs/recipes/manage-users/management-api"},"management APIs"),". This is a straightforward process for those in the role of administrator. However, it is also important for the regular users to update their profiles on their own."),(0,i.kt)("p",null,"To enable this, you will need to create your own profile page with the help of the management APIs."),(0,i.kt)("h2",{id:"get-started"},"Get started"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Make sure your backend service has acquired a pair of API key and API secret through the ",(0,i.kt)("a",{parentName:"li",href:"/docs/recipes/integrate-logto/machine-to-machine"},"Machine to Machine")," process."),(0,i.kt)("li",{parentName:"ol"},"In your client application, create a new page for the user's profile. This can be done using a variety of front-end development frameworks, such as React or Vue."),(0,i.kt)("li",{parentName:"ol"},"Make sure the user authentication is still valid. See ",(0,i.kt)("a",{parentName:"li",href:"/docs/recipes/protect-your-api/"},"protect your API")," for details"),(0,i.kt)("li",{parentName:"ol"},"On the profile page, create a form for the user to input their profile information, such as their ",(0,i.kt)("em",{parentName:"li"},"name, email address")," and ",(0,i.kt)("em",{parentName:"li"},"profile picture"),", provided by Logto. In addition, you may also want to include your own business model in the form, such as ",(0,i.kt)("em",{parentName:"li"},"age, gender, mailing address, payment methods, etc"),". These can be fetched from your own service DB, or you can store them previously as ",(0,i.kt)("inlineCode",{parentName:"li"},"custom_data")," in user object, and fetch from there."),(0,i.kt)("li",{parentName:"ol"},"It is always recommended to fetch the profile data in prior or on page load, and pre-fill the form fields. You can do it by calling:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"SDK function ",(0,i.kt)("inlineCode",{parentName:"li"},"getIdTokenClaims")," to decode basic user claims cached in ID Token on client side"),(0,i.kt)("li",{parentName:"ul"},"SDK function ",(0,i.kt)("inlineCode",{parentName:"li"},"fetchUserInfo")," to fetch user data from Logto service"),(0,i.kt)("li",{parentName:"ul"},"Management API ",(0,i.kt)("inlineCode",{parentName:"li"},"/api/users/:userId")," to fetch from Logto service"))),(0,i.kt)("li",{parentName:"ol"},"Optionally, you can verify the email and password before submitting the entire form. This ensures all emails and phone numbers in your user table are verified, which makes it easier and almost natural to enable passwordless sign-in methods (e.g. email and verification code) in your application. In order to do this, you only have to:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Configure an email or phone connector in Admin Console"),(0,i.kt)("li",{parentName:"ul"},"Make sure to add a message template with ",(0,i.kt)("inlineCode",{parentName:"li"},"Generic")," usage type in the config of the above connector"),(0,i.kt)("li",{parentName:"ul"},"Call ",(0,i.kt)("inlineCode",{parentName:"li"},"/api/verification-code")," to send verification code to a given email or phone"),(0,i.kt)("li",{parentName:"ul"},"Call ",(0,i.kt)("inlineCode",{parentName:"li"},"/api/verification-code/verify")," to verify the code against a given email or phone"))),(0,i.kt)("li",{parentName:"ol"},"When the user submits the profile form, make an API call to update the user's profile info. This can typically be done using a PATCH request, including the updated profile info in the request body payload.")))}m.isMDXComponent=!0}}]);