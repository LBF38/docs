"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[1413],{49613:function(e,t,o){o.d(t,{Zo:function(){return d},kt:function(){return m}});var s=o(59496);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,s)}return o}function n(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function a(e,t){if(null==e)return{};var o,s,r=function(e,t){if(null==e)return{};var o,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)o=i[s],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)o=i[s],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=s.createContext({}),c=function(e){var t=s.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):n(n({},t),e)),o},d=function(e){var t=c(e.components);return s.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return s.createElement(s.Fragment,{},t)}},u=s.forwardRef((function(e,t){var o=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=a(e,["components","mdxType","originalType","parentName"]),u=c(o),m=r,h=u["".concat(l,".").concat(m)]||u[m]||p[m]||i;return o?s.createElement(h,n(n({ref:t},d),{},{components:o})):s.createElement(h,n({ref:t},d))}));function m(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=o.length,n=new Array(i);n[0]=u;var a={};for(var l in t)hasOwnProperty.call(t,l)&&(a[l]=t[l]);a.originalType=e,a.mdxType="string"==typeof e?e:r,n[1]=a;for(var c=2;c<i;c++)n[c]=o[c];return s.createElement.apply(null,n)}return s.createElement.apply(null,o)}u.displayName="MDXCreateElement"},31100:function(e,t,o){o.r(t),o.d(t,{assets:function(){return d},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return a},metadata:function(){return c},toc:function(){return p}});var s=o(665),r=o(40151),i=(o(59496),o(49613)),n=["components"],a={sidebar_position:7.2},l="\ud83d\udd10 Role Based Access Control (RBAC)",c={unversionedId:"docs/recipes/rbac/README",id:"docs/recipes/rbac/README",title:"\ud83d\udd10 Role Based Access Control (RBAC)",description:"What is RBAC",source:"@site/docs/docs/recipes/rbac/README.md",sourceDirName:"docs/recipes/rbac",slug:"/docs/recipes/rbac/",permalink:"/docs/recipes/rbac/",draft:!1,editUrl:"https://github.com/logto-io/docs/tree/master/docs/docs/recipes/rbac/README.md",tags:[],version:"current",sidebarPosition:7.2,frontMatter:{sidebar_position:7.2},sidebar:"docsSidebar",previous:{title:"\ud83e\ude9d Web hooks",permalink:"/docs/recipes/web-hooks/"},next:{title:"\ud83c\udf10 Localization",permalink:"/docs/recipes/localization/"}},d={},p=[{value:"What is RBAC",id:"what-is-rbac",level:2},{value:"RBAC in Logto",id:"rbac-in-logto",level:2},{value:"Permission (Scope)",id:"permission-scope",level:3},{value:"Roles",id:"roles",level:3},{value:"Manage RBAC in Admin Console",id:"manage-rbac-in-admin-console",level:2},{value:"Create and delete permissions in API resource",id:"create-and-delete-permissions-in-api-resource",level:3},{value:"Create roles in Access Control",id:"create-roles-in-access-control",level:3},{value:"Role details page",id:"role-details-page",level:3},{value:"Assign or remove users from roles",id:"assign-or-remove-users-from-roles",level:3},{value:"Assign or remove permissions from roles",id:"assign-or-remove-permissions-from-roles",level:3},{value:"Assign or remove roles from users",id:"assign-or-remove-roles-from-users",level:3},{value:"How to protect your resource with RBAC",id:"how-to-protect-your-resource-with-rbac",level:2},{value:"Add scopes to access token",id:"add-scopes-to-access-token",level:3},{value:"Validate scopes in access token",id:"validate-scopes-in-access-token",level:3}],u={toc:p};function m(e){var t=e.components,a=(0,r.Z)(e,n);return(0,i.kt)("wrapper",(0,s.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"-role-based-access-control-rbac"},"\ud83d\udd10 Role Based Access Control (RBAC)"),(0,i.kt)("h2",{id:"what-is-rbac"},"What is RBAC"),(0,i.kt)("p",null,"Role-based access control (RBAC) is a method of assigning permissions to users based on their roles. By controlling access to resources through role authorization, RBAC can help in different perspectives:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Improved security: By assigning permissions based on roles, RBAC limits access to resources only to those who need it. This reduces the risk of unauthorized access and data breaches."),(0,i.kt)("li",{parentName:"ol"},"Greater efficiency: RBAC allows for quick and easy addition and modification of roles and permissions and implementing them across APIs, making it easy to manage access rights for large numbers of users."),(0,i.kt)("li",{parentName:"ol"},"Reduced administrative overhead: RBAC eliminates the need for manual assignment of permissions and reduces the potential errors."),(0,i.kt)("li",{parentName:"ol"},"Better compliance: RBAC can help organizations comply with regulatory and statutory requirements for confidentiality and privacy by ensuring that only authorized users have access to sensitive data."),(0,i.kt)("li",{parentName:"ol"},"Flexibility: RBAC can be easily customized and adapted to suit the specific needs of an organization, making it a versatile access control method."),(0,i.kt)("li",{parentName:"ol"},"Scalability: RBAC can be implemented in an organization of any size, from small businesses to large enterprises, and can be easily scaled up or down as necessary.")),(0,i.kt)("h2",{id:"rbac-in-logto"},"RBAC in Logto"),(0,i.kt)("p",null,"In Logto, we have implemented Role-based Access Control (RBAC) using the most standard and scalable method, allowing for a wide range of scenarios. To understand how it works, it's important to familiarize yourself with key terms:"),(0,i.kt)("h3",{id:"permission-scope"},"Permission (Scope)"),(0,i.kt)("p",null,"Permission refers to the authorization to access a resource. In a system, entities such as orders, products, and documents can be designated as resources, and various actions can be assigned."),(0,i.kt)("p",null,"Permission was implemented at the API level in Logto."),(0,i.kt)("p",null,"Examples of permissions, including the ability to edit an order, delete a product, and read a document, are as follows:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"write:orders")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"read:documents")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"delete:products"))),(0,i.kt)("h3",{id:"roles"},"Roles"),(0,i.kt)("p",null,"Roles are a grouping of permissions that can be assigned to users. They also provide a way to aggregate permissions defined for different APIs, making adding, removing, or adjusting permissions more efficient than assigning them individually to users."),(0,i.kt)("h2",{id:"manage-rbac-in-admin-console"},"Manage RBAC in Admin Console"),(0,i.kt)("h3",{id:"create-and-delete-permissions-in-api-resource"},"Create and delete permissions in API resource"),(0,i.kt)("p",null,'In Logto, permissions are set at the API level. You can navigate to the "API" section, select "API details" and then the "Permission" tab. To create a new permission, click the "Create permission" button on the top right corner. It\'s important to provide a name and details for the permission, as it will make it easier to identify and manage security.'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Manage Permissions",src:o(30731).Z,width:"2880",height:"1800"})),(0,i.kt)("h3",{id:"create-roles-in-access-control"},"Create roles in Access Control"),(0,i.kt)("p",null,'At Logto, we provide a dedicated space for Role-based Access Control (RBAC). In the left navigation menu, you\'ll see "Roles" which will display a list of roles you\'ve defined. To create a new role, click on "create role" button on the top right corner. A dialog box will appear, where you can give the role a name and description, and assign one or more permissions to the role.'),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Keep in mind that while it is technically possible to create a role without permissions or users assigned, it is not recommended to create too many empty roles. This will disrupt the harmony of role management and render the RBAC system ineffective."),(0,i.kt)("li",{parentName:"ol"},"Permissions are grouped by API in the selector, allowing you to add them in bulk or select them individually. The selected permissions will be displayed on the right side."),(0,i.kt)("li",{parentName:"ol"},"After creating a role, you will be taken to the user assignment page, where you can authorize the role to specific users. You can search for users by name, email, phone number, username or ID if available. If you prefer, you can also skip this step and assign users to the role later.")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Create Role",src:o(78459).Z,width:"3630",height:"1648"})),(0,i.kt)("h3",{id:"role-details-page"},"Role details page"),(0,i.kt)("p",null,"After completing the role creation and assignment process, you will be directed to the role details page. The layout and controls on this page are consistent with other entities. To delete the role, click the three dots button."),(0,i.kt)("p",null,"You can also edit the role name and description, view the permissions assigned to the role, and see the users who have been assigned to the role at any time."),(0,i.kt)("admonition",{type:"danger"},(0,i.kt)("p",{parentName:"admonition"},"Deleting the role will eliminate the permissions linked to it for the impacted users and delete the connection between roles, users, and permissions.")),(0,i.kt)("h3",{id:"assign-or-remove-users-from-roles"},"Assign or remove users from roles"),(0,i.kt)("p",null,'To add more users to a role, navigate to the role\'s details page and select "users." From there, click "assign roles" to open a list of users. Search or browse for the desired users and click "assign" to add them to the role. To remove a user from the role, click the trash icon.'),(0,i.kt)("admonition",{type:"danger"},(0,i.kt)("p",{parentName:"admonition"},"Taking users out of a designated role does not delete them from your user base, they will still exist but will no longer have access to the permissions associated with that role.")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Manage Role Users",src:o(57394).Z,width:"2880",height:"1800"})),(0,i.kt)("h3",{id:"assign-or-remove-permissions-from-roles"},"Assign or remove permissions from roles"),(0,i.kt)("p",null,'If you need to change the capabilities of a role, you can easily do so by assigning or removing permissions. Simply go to the "roles - role details - permission tab" and click on "assign permissions." From there, you can select the permissions you want to add to the role. To remove any permissions, click on the trash icon in the table.'),(0,i.kt)("admonition",{type:"danger"},(0,i.kt)("p",{parentName:"admonition"},"If this permission is deleted, the affected user with this role will lose the access granted by this permission.")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Manage Role Permissions",src:o(55275).Z,width:"2880",height:"1800"})),(0,i.kt)("h3",{id:"assign-or-remove-roles-from-users"},"Assign or remove roles from users"),(0,i.kt)("p",null,"You've learned how to manage roles by assigning or removing users from them, but you can also achieve the same result from the user's perspective. If you need to change a user's access control, go to \"user management - user detail - role tab.\" From there, you can easily add or remove existing roles to meet your desired outcome."),(0,i.kt)("admonition",{type:"danger"},(0,i.kt)("p",{parentName:"admonition"},"Removing a role from a user means that the user will no longer have access to the permissions associated with that role. The role itself will still exist, but it will no longer be linked to that specific user.")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Manage User Roles",src:o(39979).Z,width:"2880",height:"1800"})),(0,i.kt)("h2",{id:"how-to-protect-your-resource-with-rbac"},"How to protect your resource with RBAC"),(0,i.kt)("h3",{id:"add-scopes-to-access-token"},"Add scopes to access token"),(0,i.kt)("p",null,"When integrating with your application, ensure that you include both ",(0,i.kt)("inlineCode",{parentName:"p"},"scope")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"resources")," in the configuration when importing and initializing the LogtoClient."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'scopes = "<your-scope>"\nresources = "<your-resource>"\n')),(0,i.kt)("p",null,"This will ensure that if a user has access to them, they will be added to the access token. The specific parameters and syntax may vary depending on the language and platform of your app. Refer to the ",(0,i.kt)("a",{parentName:"p",href:"/docs/recipes/integrate-logto/"},"application integration guide")," for more information on adding scopes and resources."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},'In code, the term "scope" is used to align with OIDC standards. However, in the Admin Console, it is referred to as "permission" for better readability and understanding of the real-world scenario. Both terms refer to the same concept.')),(0,i.kt)("h3",{id:"validate-scopes-in-access-token"},"Validate scopes in access token"),(0,i.kt)("p",null,'Don\'t forget to validate the scopes in the access token. To accomplish that, you can utilize a JWT library to decode the token and check the "scope" claim. Logto issues a standard JWT format authorization token for each authorized API request, which could include a "scope" claim that holds a list of the scopes that the token has been issued for. By checking if the required scope is present in the list, you can confirm the validity of the scope. For more information, please refer to the "',(0,i.kt)("a",{parentName:"p",href:"/docs/recipes/protect-your-api/#validate-the-api-requests-authorization-token"},"Validate the API request's authorization token"),'" section.'))}m.isMDXComponent=!0},78459:function(e,t,o){t.Z=o.p+"assets/images/create-role-41cd6a664ad058397190224785976881.png"},30731:function(e,t,o){t.Z=o.p+"assets/images/manage-permissions-985f25b0b875f2b4a856e896a53b85c2.png"},55275:function(e,t,o){t.Z=o.p+"assets/images/manage-role-permissions-8d47ef3979abef82c70c91a04042ec6a.png"},57394:function(e,t,o){t.Z=o.p+"assets/images/manage-role-users-036d7aee211cb8735d7d9b92ee64d805.png"},39979:function(e,t,o){t.Z=o.p+"assets/images/manage-user-roles-2194f19b14b54b56463da15cc83098b2.png"}}]);